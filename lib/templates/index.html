<!doctype html>
<html>
    <head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="bundle.js"></script>
    </head>

    <body>
        <div class="tracker-container">
            <div class="filters">
                <div class="filter-set">
                    <h2 class="filter-set__label">Status</h2>

                    {% for status in data.statuses %}
                    <a href="#" class="status-filter status-filter--{{ status.slug }}" data-status="{{ status.status }}">{{ status.status }}</a>
                    {% endfor %}
                </div>
            </div>

            {% for category in data.categories %}
            <div class="category" data-slug="{{ category.slug }}">
                <h2 class="category__name"><a href="#">{{ category.name }}</a></h2>

                {% for recommendation in category.recommendations %}
                <div data-id="{{ recommendation.id }}"
                  data-status="{{ recommendation.status }}"
                  class="recommendation recommendation--{{ recommendation.statusSlug }}">
                    <h3 class="recommendation__gist">{{ recommendation.recommendation_gist }}</h3>

                    <div class="recommendation__status">{{ recommendation.status }}</div>

                    <div class="recommendation__specific">
                        {{ recommendation.recommendation_specific }}
                    </div>

                    <ul class="agencies">
                        {% for agency in recommendation.agency_responsible %}
                        <li class="agency">{{ agency }}</li>
                        {% endfor %}
                    </ul>

                    <ul class="recommendation__updates">
                        {% for update in recommendation.updates %}
                        <li class="update">
                          <h4 class="update__date">{{ update.date }}</h3>
                          <div class="update__notes">
                              {{ update.notes | safe }}
                          </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        <script>
            document.querySelectorAll('.tracker-container').forEach(function(el) {
              new dojtracker.App(el);
            });
        </script>
    </body>
</html>
